{% extends 'admin/base.html.twig' %}

{% block title %}Détails de l'Étage : {{ etage.nom }}{% endblock %}

{% block body %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Étage : {{ etage.nom }}</h1>
        <div>
            <a href="{{ path('admin_etage_edit', {'id': etage.id}) }}" class="btn btn-warning">Modifier l'étage</a>
        </div>
    </div>

    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('admin_site_show', {'id': etage.site.id}) }}">{{ etage.site.nom }}</a></li>
            <li class="breadcrumb-item active" aria-current="page">{{ etage.nom }}</li>
        </ol>
    </nav>

    <table class="table table-bordered">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ etage.id }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ etage.nom }}</td>
            </tr>
            <tr>
                <th>Site Parent</th>
                <td><a href="{{ path('admin_site_show', {'id': etage.site.id}) }}">{{ etage.site.nom }}</a></td>
            </tr>
        </tbody>
    </table>

    <hr>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Services de cet étage ({{ etage.services|length }})</h3>
        <a href="{{ path('admin_service_new', {'etage_id': etage.id}) }}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Ajouter un service
        </a>
    </div>

    {% if etage.services|length > 0 %}
        <div class="list-group">
            {% for service in etage.services|sort((a, b) => a.nom <=> b.nom) %}
                <a href="{{ path('admin_service_show', {'id': service.id}) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    {{ service.nom }}
                </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">Aucun service n'a été créé pour cet étage.</div>
    {% endif %}

    <div class="d-flex justify-content-between mt-4">
         <a href="{{ path('admin_etage_index') }}" class="btn btn-secondary">Retour à la liste des étages</a>
        {{ include('admin/etage/_delete_form.html.twig') }}
    </div>
{% endblock %}
