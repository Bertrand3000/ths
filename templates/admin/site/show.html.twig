{% extends 'admin/base.html.twig' %}

{% block title %}Détails du Site : {{ site.nom }}{% endblock %}

{% block body %}
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h1>Site : {{ site.nom }}</h1>
        <div>
            <a href="{{ path('admin_site_edit', {'id': site.id}) }}" class="btn btn-warning">Modifier le site</a>
        </div>
    </div>

    <table class="table table-bordered">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ site.id }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ site.nom }}</td>
            </tr>
            <tr>
                <th>Flex Office</th>
                <td>{{ site.flex ? 'Oui' : 'Non' }}</td>
            </tr>
        </tbody>
    </table>

    <hr>

    <div class="d-flex justify-content-between align-items-center mb-3">
        <h3>Étages de ce site ({{ site.etages|length }})</h3>
        <a href="{{ path('admin_etage_new', {'site_id': site.id}) }}" class="btn btn-primary">
            <i class="fas fa-plus"></i> Ajouter un étage
        </a>
    </div>

    {% if site.etages|length > 0 %}
        <div class="list-group">
            {% for etage in site.etages|sort((a, b) => a.nom <=> b.nom) %}
                <a href="{{ path('admin_etage_show', {'id': etage.id}) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    {{ etage.nom }}
                    <span class="badge bg-primary rounded-pill">{{ etage.services|length }} service(s)</span>
                </a>
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-info">Aucun étage n'a été créé pour ce site.</div>
    {% endif %}

    <div class="d-flex justify-content-between mt-4">
         <a href="{{ path('admin_site_index') }}" class="btn btn-secondary">Retour à la liste des sites</a>
        {{ include('admin/site/_delete_form.html.twig') }}
    </div>
{% endblock %}
